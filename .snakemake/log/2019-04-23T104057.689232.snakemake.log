Building DAG of jobs...
Using shell: /anaconda2/envs/py3/bin/bash
Provided cores: 1
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	4	color_genotypes_and_find_egg_mutations
	4	compair_pairs
	4	egg_epistasis
	4	export
	4	organize_output
	2	plot_background
	4	plot_background_kkclades
	4	simplify_auspice_names
	4	tip_frequencies
	35

[Tue Apr 23 10:40:59 2019]
rule export:
    input: results/tree_who_h3n2_ha_12y_concat_fra.nwk, results/metadata_h3n2_ha.tsv, config/auspice_config_h3n2.json, results/branch-lengths_who_h3n2_ha_12y_concat_fra.json, results/nt-muts_who_h3n2_ha_12y_concat_fra.json, results/aa-muts_who_h3n2_ha_12y_concat_fra.json, results/titers-tree-model_who_h3n2_ha_12y_concat_fra.json, results/titers-sub-model_who_h3n2_ha_12y_concat_fra.json, results/clades_who_h3n2_ha_12y_concat_fra.json, results/traits_who_h3n2_ha_12y_concat_fra.json, results/lbi_who_h3n2_ha_12y_concat_fra.json, results/distances_who_h3n2_ha_12y_concat_fra.json
    output: auspice/flu_who_h3n2_ha_12y_concat_fra_tree.json, auspice/flu_who_h3n2_ha_12y_concat_fra_meta.json, auspice/flu_who_h3n2_ha_12y_concat_fra_root-sequence.json
    jobid: 36
    wildcards: center=who, lineage=h3n2, segment=ha, resolution=12y, passage=concat, assay=fra

[Tue Apr 23 10:41:20 2019]
Finished job 36.
1 of 35 steps (3%) done

[Tue Apr 23 10:41:20 2019]
rule export:
    input: results/tree_who_h3n2_ha_12y_concat_hi.nwk, results/metadata_h3n2_ha.tsv, config/auspice_config_h3n2.json, results/branch-lengths_who_h3n2_ha_12y_concat_hi.json, results/nt-muts_who_h3n2_ha_12y_concat_hi.json, results/aa-muts_who_h3n2_ha_12y_concat_hi.json, results/titers-tree-model_who_h3n2_ha_12y_concat_hi.json, results/titers-sub-model_who_h3n2_ha_12y_concat_hi.json, results/clades_who_h3n2_ha_12y_concat_hi.json, results/traits_who_h3n2_ha_12y_concat_hi.json, results/lbi_who_h3n2_ha_12y_concat_hi.json, results/distances_who_h3n2_ha_12y_concat_hi.json
    output: auspice/flu_who_h3n2_ha_12y_concat_hi_tree.json, auspice/flu_who_h3n2_ha_12y_concat_hi_meta.json, auspice/flu_who_h3n2_ha_12y_concat_hi_root-sequence.json
    jobid: 33
    wildcards: center=who, lineage=h3n2, segment=ha, resolution=12y, passage=concat, assay=hi

[Tue Apr 23 10:41:42 2019]
Finished job 33.
2 of 35 steps (6%) done

[Tue Apr 23 10:41:42 2019]
rule export:
    input: results/tree_who_h3n2_ha_6y_concat_hi.nwk, results/metadata_h3n2_ha.tsv, config/auspice_config_h3n2.json, results/branch-lengths_who_h3n2_ha_6y_concat_hi.json, results/nt-muts_who_h3n2_ha_6y_concat_hi.json, results/aa-muts_who_h3n2_ha_6y_concat_hi.json, results/titers-tree-model_who_h3n2_ha_6y_concat_hi.json, results/titers-sub-model_who_h3n2_ha_6y_concat_hi.json, results/clades_who_h3n2_ha_6y_concat_hi.json, results/traits_who_h3n2_ha_6y_concat_hi.json, results/lbi_who_h3n2_ha_6y_concat_hi.json, results/distances_who_h3n2_ha_6y_concat_hi.json
    output: auspice/flu_who_h3n2_ha_6y_concat_hi_tree.json, auspice/flu_who_h3n2_ha_6y_concat_hi_meta.json, auspice/flu_who_h3n2_ha_6y_concat_hi_root-sequence.json
    jobid: 27
    wildcards: center=who, lineage=h3n2, segment=ha, resolution=6y, passage=concat, assay=hi

[Tue Apr 23 10:42:02 2019]
Finished job 27.
3 of 35 steps (9%) done

[Tue Apr 23 10:42:02 2019]
rule export:
    input: results/tree_who_h3n2_ha_6y_concat_fra.nwk, results/metadata_h3n2_ha.tsv, config/auspice_config_h3n2.json, results/branch-lengths_who_h3n2_ha_6y_concat_fra.json, results/nt-muts_who_h3n2_ha_6y_concat_fra.json, results/aa-muts_who_h3n2_ha_6y_concat_fra.json, results/titers-tree-model_who_h3n2_ha_6y_concat_fra.json, results/titers-sub-model_who_h3n2_ha_6y_concat_fra.json, results/clades_who_h3n2_ha_6y_concat_fra.json, results/traits_who_h3n2_ha_6y_concat_fra.json, results/lbi_who_h3n2_ha_6y_concat_fra.json, results/distances_who_h3n2_ha_6y_concat_fra.json
    output: auspice/flu_who_h3n2_ha_6y_concat_fra_tree.json, auspice/flu_who_h3n2_ha_6y_concat_fra_meta.json, auspice/flu_who_h3n2_ha_6y_concat_fra_root-sequence.json
    jobid: 30
    wildcards: center=who, lineage=h3n2, segment=ha, resolution=6y, passage=concat, assay=fra

[Tue Apr 23 10:42:20 2019]
Finished job 30.
4 of 35 steps (11%) done

[Tue Apr 23 10:42:20 2019]
rule tip_frequencies:
    input: results/tree_who_h3n2_ha_12y_concat_fra.nwk, results/metadata_h3n2_ha.tsv, config/frequency_weights_by_region.json
    output: auspice/flu_who_h3n2_ha_12y_concat_fra_tip-frequencies.json
    jobid: 38
    wildcards: center=who, lineage=h3n2, segment=ha, resolution=12y, passage=concat, assay=fra

[Tue Apr 23 10:42:34 2019]
Finished job 38.
5 of 35 steps (14%) done

[Tue Apr 23 10:42:34 2019]
rule simplify_auspice_names:
    input: auspice/flu_who_h3n2_ha_12y_concat_fra_tree.json, results/tree_who_h3n2_ha_12y_concat_fra.nwk, auspice/flu_who_h3n2_ha_12y_concat_fra_meta.json, auspice/flu_who_h3n2_ha_12y_concat_fra_root-sequence.json, auspice/flu_who_h3n2_ha_12y_concat_fra_tip-frequencies.json
    output: auspice/flu_seasonal_h3n2_ha_12y_fra_tree.json, results/kk_clades_h3n2_ha_12y_fra.csv, auspice/flu_seasonal_h3n2_ha_12y_fra_meta.json, auspice/flu_seasonal_h3n2_ha_12y_fra_root-sequence.json, auspice/flu_seasonal_h3n2_ha_12y_fra_tip-frequencies.json
    jobid: 4
    wildcards: lineage=h3n2, segment=ha, resolution=12y, assay=fra

Waiting at most 5 seconds for missing files.
[Tue Apr 23 10:43:01 2019]
Finished job 4.
6 of 35 steps (17%) done

[Tue Apr 23 10:43:01 2019]
rule organize_output:
    input: auspice/flu_seasonal_h3n2_ha_12y_fra_tree.json, results/aa-seq_who_h3n2_ha_12y_concat_fra_HA1.fasta, auspice/flu_seasonal_h3n2_ha_12y_fra_root-sequence.json
    output: dataframes/h3n2_ha_12y_fra.csv, dataframes/h3n2_ha_12y_fra_egg.csv, dataframes/h3n2_ha_12y_fra_tidy.csv
    jobid: 8
    wildcards: lineage=h3n2, segment=ha, resolution=12y, assay=fra

[Tue Apr 23 10:44:29 2019]
Finished job 8.
7 of 35 steps (20%) done

[Tue Apr 23 10:44:29 2019]
rule color_genotypes_and_find_egg_mutations:
    input: auspice/flu_seasonal_h3n2_ha_12y_fra_tree.json, results/aa-seq_who_h3n2_ha_12y_concat_fra_HA1.fasta, auspice/flu_seasonal_h3n2_ha_12y_fra_meta.json, results/tree_who_h3n2_ha_12y_concat_fra.nwk, config/auspice_config_h3n2.json, dataframes/h3n2_ha_12y_fra.csv
    output: plots/h3n2_ha_12y_fra/egg_mutation_aa_prevalence_h3n2_ha_12y_fra.pdf, plots/h3n2_ha_12y_fra/egg_mutation_site_prevalence_h3n2_ha_12y_fra.pdf, plots/h3n2_ha_12y_fra/before_after_eggpassaging_h3n2_ha_12y_fra.pdf
    jobid: 12
    wildcards: lineage=h3n2, segment=ha, resolution=12y, assay=fra

[Tue Apr 23 10:44:32 2019]
Error in rule color_genotypes_and_find_egg_mutations:
    jobid: 12
    output: plots/h3n2_ha_12y_fra/egg_mutation_aa_prevalence_h3n2_ha_12y_fra.pdf, plots/h3n2_ha_12y_fra/egg_mutation_site_prevalence_h3n2_ha_12y_fra.pdf, plots/h3n2_ha_12y_fra/before_after_eggpassaging_h3n2_ha_12y_fra.pdf

RuleException:
CalledProcessError in line 790 of /Users/katekistler/nextstrain/egg-passage/Snakefile:
Command 'set -euo pipefail;  python3 scripts/color_genotypes.py             --tree auspice/flu_seasonal_h3n2_ha_12y_fra_tree.json             --meta auspice/flu_seasonal_h3n2_ha_12y_fra_meta.json             --seqs results/aa-seq_who_h3n2_ha_12y_concat_fra_HA1.fasta             --newick results/tree_who_h3n2_ha_12y_concat_fra.nwk             --config config/auspice_config_h3n2.json             --dataframe dataframes/h3n2_ha_12y_fra.csv 
        python3 scripts/find_egg_mutations.py             --in_file dataframes/h3n2_ha_12y_fra.csv' returned non-zero exit status 1.
  File "/Users/katekistler/nextstrain/egg-passage/Snakefile", line 790, in __rule_color_genotypes_and_find_egg_mutations
  File "/anaconda2/envs/py3/lib/python3.6/concurrent/futures/thread.py", line 56, in run
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /Users/katekistler/nextstrain/egg-passage/.snakemake/log/2019-04-23T104057.689232.snakemake.log
